ğŸ§  FARO RAG Pipeline on AWS EKSA scalable Retrieval-Augmented Generation (RAG) pipeline deployed on AWS EKS, featuring a dual-storage vector architecture (Qdrant + PostgreSQL) and custom Prometheus/Grafana observability.ğŸ“š DocumentationğŸ“„ View Full Technical Documentation (PDF)Comprehensive report covering the DOT framework research, security group specifications, and the "Bastion-First" network strategy.ğŸ¯ OverviewThis project implements a production-ready RAG Pipeline designed to ingest documents, chunk them semantically, and generate vector embeddings for intelligent search.Unlike standard RAG tutorials, this infrastructure focuses on Data Persistence and Observability. It implements a Dual-Storage Architecture, writing vectors to both Qdrant (for low-latency search) and PostgreSQL pgvector (for ACID-compliant long-term storage), ensuring data is never lost even if the in-memory vector store fails.ğŸ—ï¸ ArchitectureCode snippetgraph LR
    User[User Upload] --> Chunk[Chunking Service]
    Chunk --> S3[S3 Bucket]
    S3 -- Event Trigger --> Embed[Embeddings Engine]
    Embed -- API Call --> Portkey[Portkey AI Gateway]
    Embed -- Write --> Qdrant[(Qdrant Vector DB)]
    Embed -- Write --> Postgres[(RDS PostgreSQL)]
    Query[Query Service] -- Read --> Qdrant
Infrastructure HighlightsCompute: AWS EKS Cluster (v1.34) with auto-scaling Node Groups (t3.medium).Vector Engine: Qdrant (running on EC2 for performance) bridged into K8s service discovery.Storage: S3 for raw document chunks, RDS PostgreSQL for shadow vector storage.Security: "Bastion-First" architecture. Critical resources (RDS, Qdrant, Nodes) reside in private subnets with no public internet access.âœ¨ Key FeaturesğŸš€ Dual-Storage Vector EngineTo balance speed and reliability, the system writes embeddings to two locations simultaneously:Qdrant: Optimized for HNSW (Hierarchical Navigable Small World) indexing, providing millisecond-latency similarity search.PostgreSQL (pgvector): Provides ACID guarantees, automated AWS backups, and point-in-time recovery.ğŸ›¡ï¸ Zero-Trust Security NetworkPrivate Subnets: Application nodes and databases are isolated from the public internet.Bastion Entry: Management access is only possible via a VPN Bastion host (OpenVPN).Strict Security Groups: Security groups reference each other by ID rather than IP ranges, creating a dynamic chain of trust.ğŸ“Š Custom RAG ObservabilityA custom monitoring stack built with Prometheus and Grafana:Accuracy Proxy: real-time tracking of "Result Overlap" between Qdrant and Postgres to ensure data consistency.Latency Comparison: Side-by-side visualization of search performance.Service Discovery: Custom K8s Service Bridges to scrape metrics from external EC2 instances (Qdrant).ğŸ“¸ Monitoring & DashboardsPipeline Performance DashboardCustom Grafana dashboard visualizing the vector ingestion rate and search latency comparison.(Add screenshot from PDF page 41 here: docs/screenshots/grafana-dashboard.png)Vector Search LatencyComparing the millisecond-response time of Qdrant vs. PostgreSQL.(Add screenshot from PDF page 42 here: docs/screenshots/latency-comparison.png)ğŸ› ï¸ Technology StackComponentTechnologyDescriptionIaCTerraformFull infrastructure provisioning (VPC, EKS, RDS, SG)OrchestratorAWS EKSManaged Kubernetes Control PlaneAI GatewayPortkeyUnified API for switching embedding models (Cohere/OpenAI)Vector DBQdrantPrimary search engineDatabaseRDS PostgreSQLPersistent storage with pgvector extensionMonitoringPrometheus/GrafanaMetric scraping and visualizationBackendPython (FastAPI)Async microservicesğŸš€ Getting StartedPrerequisitesAWS CLI configuredTerraform 1.6+kubectlDeploymentProvision InfrastructureBashcd infrastructure/terraform
terraform init
terraform apply
Configure Kubernetes AccessBashaws eks update-kubeconfig --name faro-rag-cluster --region eu-central-1
Deploy ServicesBashkubectl apply -f infrastructure/kubernetes/
ğŸ‘¤ AuthorSonny HeLinkedIn: Sonny HePortfolio: GitHubPhase 4: LinkedIn StrategyAction: When you post this, do not just post a link. Use the "Project" feature on LinkedIn or write a Featured Post.Draft LinkedIn Post:ğŸš€ Just deployed: A Dual-Storage RAG Pipeline on AWS EKS.Iâ€™m excited to share my latest infrastructure project, the FARO RAG Pipeline. While many RAG tutorials focus on the Python code, I wanted to focus on the infrastructure engineering required to run these systems in production.The Challenge: How do you ensure vector search speed without losing data persistence?The Solution: I architected a "Dual-Storage" pattern using Terraform and Kubernetes:Fast Path: Qdrant handles high-speed vector similarity searches.Reliable Path: AWS RDS PostgreSQL (with pgvector) acts as a "shadow store" for ACID compliance and backups.Key Engineering Highlights:ğŸ› ï¸ Infrastructure as Code: Fully provisioned EKS cluster, IRSA (IAM Roles for Service Accounts), and networking using Terraform.ğŸ” Security: Implemented a "Bastion-First" network topology where database and worker nodes reside in private subnets, accessible only via OpenVPN.ğŸ“ˆ Observability: Built custom Prometheus/Grafana dashboards to compare search latency between Qdrant and Postgres in real-time.Check out the full code and architectural diagrams here: [Link to your new Repo]#Kubernetes #AWS #Terraform #RAG #DevOps #InfrastructureEngineering